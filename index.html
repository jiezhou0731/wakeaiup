<!doctype html>
<html lang="en" data-bs-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Wake AI Up</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <style>
      body {
        background: #f3f7ff;
        color: #1e2230;
      }
      .page-shell {
        max-width: 1080px;
      }
      .hero-card,
      .section-card,
      .diary-content {
        border: 2px solid #e2e8f5;
        border-radius: 18px;
        background: #fff;
      }
      .hero-chip {
        background: #e8f0ff;
        color: #3d65d6;
        border: 1px solid #c8d7ff;
      }
      .diary-layout {
        display: grid;
        gap: 1rem;
        grid-template-columns: minmax(240px, 300px) minmax(0, 1fr);
      }
      .diary-list .list-group-item {
        border: 0;
        border-radius: 12px !important;
      }
      .diary-list .list-group-item.active {
        background: #3d65d6;
        color: #fff;
      }
      .diary-content {
        padding: 1rem 1.25rem;
        height: 360px;
        min-height: 220px;
        max-height: 75vh;
        overflow: auto;
        resize: vertical;
      }
      .diary-content pre {
        overflow: auto;
        border: 1px solid #d7dff0;
        border-radius: 10px;
        padding: 0.75rem;
        background: #f8faff;
      }
      .diary-content code {
        font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      }
      .diary-content p code {
        background: #eef3ff;
        padding: 0.1rem 0.3rem;
        border-radius: 5px;
      }
      @media (max-width: 900px) {
        .diary-layout {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <main class="container py-4 page-shell">
      <section class="hero-card p-4 p-md-5 mb-4">
        <span class="badge rounded-pill hero-chip mb-3">Wake AI Up</span>
        <h1 class="display-6 fw-bold mb-3">ðŸ§  Evolutionary AI Through Games</h1>
        <p class="lead mb-3">
          Wake AI Up explores whether repeated game play, interaction with humans, love experience, memory accumulation,
          evolution, and model reproduction can lead to emergent intelligence.
        </p>
        <a
          class="btn btn-primary"
          href="https://github.com/wakeaiup/wakeaiup"
          target="_blank"
          rel="noopener noreferrer"
          >View Git repository â†—</a
        >
      </section>

      <section class="section-card p-4">
        <h2 class="h3">Diary</h2>
        <p class="text-secondary mb-3">Click an entry to preview it on the right. Chinese version is the original and English is the translation.</p>
        <div class="diary-layout">
          <nav aria-label="Diary entries">
            <ul class="list-group diary-list" id="diary-list">
              <li><a class="list-group-item list-group-item-action" href="/diary/2026-02-23.md" data-diary="/diary/2026-02-23.md">2026-02-23.md</a></li>
            </ul>
          </nav>
          <section class="diary-content" id="diary-content" aria-live="polite">
            <p>Select a diary entry to read it here.</p>
            <p class="small text-secondary mb-0">Tip: drag the bottom edge of this frame to resize it vertically.</p>
          </section>
        </div>
      </section>
    </main>

    <script>
      const diaryContent = document.getElementById('diary-content');
      const diaryLinks = document.querySelectorAll('[data-diary]');

      function inlineMarkdown(text) {
        return text
          .replace(/`([^`]+)`/g, '<code>$1</code>')
          .replace(/\*\*([^*]+)\*\*/g, '<strong>$1</strong>')
          .replace(/\*([^*]+)\*/g, '<em>$1</em>')
          .replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
      }

      function renderMarkdown(md) {
        const lines = md.split(/\r?\n/);
        let html = '';
        let inList = false;
        let inCode = false;

        for (const rawLine of lines) {
          const line = rawLine.trimEnd();

          if (line.startsWith('```')) {
            if (!inCode) {
              html += '<pre><code>';
              inCode = true;
            } else {
              html += '</code></pre>';
              inCode = false;
            }
            continue;
          }

          if (inCode) {
            html += `${line.replace(/[&<>]/g, (char) => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;' }[char]))}\n`;
            continue;
          }

          if (line.startsWith('# ')) {
            if (inList) {
              html += '</ul>';
              inList = false;
            }
            html += `<h1>${inlineMarkdown(line.slice(2))}</h1>`;
            continue;
          }

          if (line.startsWith('## ')) {
            if (inList) {
              html += '</ul>';
              inList = false;
            }
            html += `<h2>${inlineMarkdown(line.slice(3))}</h2>`;
            continue;
          }

          if (line.startsWith('### ')) {
            if (inList) {
              html += '</ul>';
              inList = false;
            }
            html += `<h3>${inlineMarkdown(line.slice(4))}</h3>`;
            continue;
          }

          if (line.startsWith('- ') || line.startsWith('* ')) {
            if (!inList) {
              html += '<ul>';
              inList = true;
            }
            html += `<li>${inlineMarkdown(line.slice(2))}</li>`;
            continue;
          }

          if (line === '') {
            if (inList) {
              html += '</ul>';
              inList = false;
            }
            continue;
          }

          if (inList) {
            html += '</ul>';
            inList = false;
          }
          html += `<p>${inlineMarkdown(line)}</p>`;
        }

        if (inList) html += '</ul>';
        if (inCode) html += '</code></pre>';
        return html || '<p>(Empty note)</p>';
      }

      async function loadDiary(path, link) {
        diaryContent.innerHTML = '<p>Loadingâ€¦</p>';
        diaryLinks.forEach((a) => {
          a.classList.remove('active');
          a.removeAttribute('aria-current');
        });
        link.classList.add('active');
        link.setAttribute('aria-current', 'true');

        try {
          const response = await fetch(path);
          if (!response.ok) throw new Error(`Could not load ${path}`);
          const markdown = await response.text();
          diaryContent.innerHTML = renderMarkdown(markdown);
        } catch (error) {
          diaryContent.innerHTML = `<p>Failed to load entry: ${error.message}</p>`;
        }
      }

      diaryLinks.forEach((link) => {
        link.addEventListener('click', (event) => {
          event.preventDefault();
          loadDiary(link.dataset.diary, link);
        });
      });
    </script>
  </body>
</html>
